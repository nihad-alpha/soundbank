<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- CSS -->
	<link rel="stylesheet" href="assets/css/bootstrap-reboot.min.css">
	<link rel="stylesheet" href="assets/css/bootstrap-grid.min.css">
	<link rel="stylesheet" href="assets/css/owl.carousel.min.css">
	<link rel="stylesheet" href="assets/css/magnific-popup.css">
	<link rel="stylesheet" href="assets/css/select2.min.css">
	<link rel="stylesheet" href="assets/css/paymentfont.min.css">
	<link rel="stylesheet" href="assets/css/slider-radio.css">
	<link rel="stylesheet" href="assets/css/plyr.css">
	<link rel="stylesheet" href="assets/css/main.css">

	<!-- Favicons -->
	<link rel="icon" type="image/png" href="assets/icon/favicon-32x32.png" sizes="32x32">
	<link rel="apple-touch-icon" href="assets/icon/favicon-32x32.png">

	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="author" content="Dmitry Volkov">
	<title>Soundbank</title>

</head>
<body>

				<!-- authorization form -->
				<div class="col-12">
					<div class="sign" style = "margin-top:5%">
						<div class="sign__content">
							<form action="#" class="sign__form">
								<a href="index.html" class="sign__logo">
									<img src="assets/img/logo.svg" alt="">
								</a>

								<div class="sign__group">
									<input id="password" type="text" class="sign__input" placeholder="New Password">
								</div>
								
								<button id="change-button" onclick="change()" class="sign__btn" type="button">Change password</button>
							</form>
						</div>
					</div>
				</div>
				<!-- end authorization form -->

	<!-- JS -->
	<script src="assets/js/jquery-3.5.1.min.js"></script>
	<script src="assets/js/bootstrap.bundle.min.js"></script>
	<script src="assets/js/owl.carousel.min.js"></script>
	<script src="assets/js/jquery.magnific-popup.min.js"></script>
	<script src="assets/js/smooth-scrollbar.js"></script>
	<script src="assets/js/select2.min.js"></script>
	<script src="assets/js/slider-radio.js"></script>
	<script src="assets/js/jquery.inputmask.min.js"></script>
	<script src="assets/js/plyr.min.js"></script>
	<script src="assets/js/main.js"></script>
</body>
<script>
	function change() {
		
		const urlParams = new URLSearchParams(window.location.search);
		var token = urlParams.get('token');

		var change = {
			"password" : $("#password").val(),
			"token" : token
		};

		$("#forgot-button").prop('disabled', true);

		$.post("api/accounts/reset", change, function(data){
				alert(data.message);
				window.location = "signin.html";
			}).fail(function(error) {
				alert(error.responseJSON.message);
				$("#forgot-button").prop('disabled', false);
			});
	}
</script>
</html>